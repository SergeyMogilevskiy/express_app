(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(t,e,a){t.exports=a(232)},112:function(t,e,a){},230:function(t,e,a){},232:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),c=a(31),o=a.n(c),i=(a(112),a(9)),u=a(10),l=a(12),s=a(11),m=a(13),p=a(235),d=a(18),h=a(6),E=a(48),f=a.n(E),b=Object(h.createMuiTheme)({palette:{primary:f.a},typography:{useNextVariants:!0}}),g=a(30),O=a(92),y=a(93),j=a(40),v=a(22),C={totalProducts:0,productsList:[],product:{},page:1,limit:4},w={fetchError:{toShow:!1,message:""}},T={productsInCart:[]},R=Object(g.combineReducers)({products:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0,a=e.type,r=e.payload;switch(a){case"FETCH_RPODUCTS_SUCCESSFUL":return Object(v.a)({},t,{productsList:[].concat(Object(j.a)(t.productsList),Object(j.a)(r))});case"FETCH_RPODUCT_BY_ID":return Object(v.a)({},t,{product:r});case"SET_TOTAL_PRODUCTS":return Object(v.a)({},t,{totalProducts:Number(r)});case"SET_PAGE":return Object(v.a)({},t,{page:r});case"SET_LIMIT":return Object(v.a)({},t,{limit:r.limit});default:return t}},errors:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0,a=e.type,r=e.payload;switch(a){case"FETCH_REQUEST_ERROR":return Object(v.a)({},t,{fetchError:{toShow:!0,message:r}});case"RESET_FETCH_ERROR":return Object(v.a)({},t,{fetchError:{toShow:!1,message:""}});default:return t}},cart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0,a=e.type,r=e.payload;switch(a){case"ADD_TO_CART":var n=Object(j.a)(t.productsInCart);return n.find(function(t){return t.product.id===r.id})?n=n.map(function(t){return t.product.id===r.id&&t.count++,t}):n.push({product:r,count:1}),Object(v.a)({},t,{productsInCart:n});case"REMOVE_FROM_CART":var c=t.productsInCart.filter(function(t){return t.product.id!==r.id});return Object(v.a)({},t,{productsInCart:c});case"REMOVE_ONE_FROM_CART":var o=t.productsInCart.map(function(t){return t.product.id===r.id&&t.count--,t}).filter(function(t){return 0!==t.count});return Object(v.a)({},t,{productsInCart:o});default:return t}}}),_=function(t){return{type:"FETCH_REQUEST_ERROR",payload:t}},k=a(100),x=a.n(k),S=a(106),N=a(8),P=a.n(N),F=a(94),A=a.n(F),I=a(96),D=a.n(I),M=a(97),U=a.n(M),H=a(99),L=a.n(H),z=a(98),B=a.n(z),G=a(50),V=a.n(G),W=a(65),J=a.n(W),Q=a(95),Y=a.n(Q),$={success:A.a,warning:Y.a,error:D.a,info:U.a};var q=Object(h.withStyles)(function(t){return{success:{backgroundColor:f.a[600]},error:{backgroundColor:t.palette.error.dark},info:{backgroundColor:t.palette.primary.dark},warning:{backgroundColor:B.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:t.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(t){var e=t.classes,a=t.className,r=t.message,c=t.onClose,o=t.variant,i=Object(S.a)(t,["classes","className","message","onClose","variant"]),u=$[o];return n.a.createElement(J.a,Object.assign({className:P()(e[o],a),"aria-describedby":"client-snackbar",message:n.a.createElement("span",{id:"client-snackbar",className:e.message},n.a.createElement(u,{className:P()(e.icon,e.iconVariant)}),r),action:[n.a.createElement(V.a,{key:"close","aria-label":"Close",color:"inherit",className:e.close,onClick:c},n.a.createElement(L.a,{className:e.icon}))]},i))}),K=function(t){function e(){var t,a;Object(i.a)(this,e);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(n)))).closeError=function(){a.props.resetFetchError()},a}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.fetchError;return n.a.createElement(x.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t.toShow,autoHideDuration:6e3,onClose:this.closeError},n.a.createElement(q,{onClose:this.closeError,variant:"error",message:t.message}))}}]),e}(r.Component),X=Object(h.withStyles)(function(t){return{margin:{margin:t.spacing.unit}}})(K),Z={resetFetchError:function(){return{type:"RESET_FETCH_ERROR"}}},tt=Object(d.b)(function(t){return{fetchError:t.errors.fetchError}},Z)(X),et=a(234),at=a(66),rt=function(t){return t.cart.productsInCart},nt=Object(at.a)([rt],function(t){return t.reduce(function(t,e){return t+e.count},0)}),ct=Object(at.a)([rt],function(t){return t.reduce(function(t,e){var a=e.product,r=e.count;return t+a.price*r},0)}),ot=a(101),it=a.n(ot),ut=a(102),lt=a.n(ut),st=a(220);var mt=Object(h.withStyles)(function(t){return{badge:{top:1,right:-15,border:"2px solid ".concat("light"===t.palette.type?t.palette.grey[200]:t.palette.grey[900])}}})(function(t){var e=t.classes,a=t.totalCount;return n.a.createElement(st.a,{to:"/cart"},n.a.createElement(V.a,{"aria-label":"Cart"},n.a.createElement(it.a,{badgeContent:a,color:"primary",classes:{badge:e.badge}},n.a.createElement(lt.a,null))))}),pt=Object(d.b)(function(t){return{totalCount:nt(t)}},null)(mt),dt=a(29),ht=a.n(dt),Et=a(7),ft=a.n(Et),bt=function(t){function e(){return Object(i.a)(this,e),Object(l.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.classes;return n.a.createElement("header",{className:t.header},n.a.createElement(ft.a,{className:t.container,container:!0,direction:"row",justify:"space-between",alignItems:"center"},n.a.createElement(ft.a,{item:!0,xs:9,container:!0,direction:"row"},n.a.createElement(ht.a,{className:t.paper},n.a.createElement(et.a,{to:"/",activeClassName:"active"},"Home")),n.a.createElement(ht.a,{className:t.paper},n.a.createElement(et.a,{to:"/products",activeClassName:"active"},"Products"))),n.a.createElement(pt,null)))}}]),e}(r.Component),gt=Object(h.withStyles)(function(t){return{header:{flexGrow:1,padding:"20px",backgroundColor:"#4caf50"},container:{maxWidth:"1000px",margin:"0 auto"},paper:{padding:1*t.spacing.unit,textAlign:"center",color:t.palette.text.secondary,marginRight:"20px"}}})(bt),Ot=function(t){function e(){return Object(i.a)(this,e),Object(l.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.children;return n.a.createElement(r.Fragment,null,n.a.createElement(gt,null),n.a.createElement("main",null,t),n.a.createElement(tt,null))}}]),e}(r.Component),yt=a(236),jt=a(233),vt=a(49),Ct=a(21),wt=a.n(Ct),Tt=a(104),Rt=a.n(Tt),_t=a(52),kt=a.n(_t),xt=a(105),St=a.n(xt),Nt=a(16),Pt=a.n(Nt),Ft=function(t){function e(){var t,a;Object(i.a)(this,e);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(n)))).buyProduct=function(){a.props.addToCart(a.props.product)},a}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.classes,a=t.product;return n.a.createElement(ft.a,{item:!0,key:a.id,sm:6,md:4,lg:3},n.a.createElement(Rt.a,{className:e.card},n.a.createElement(St.a,{className:e.cardMedia,image:a.img,title:"Image title"}),n.a.createElement(kt.a,null,n.a.createElement(Pt.a,null,a.price," ",a.currency),n.a.createElement(st.a,{to:"/product/".concat(a.id)},n.a.createElement(wt.a,{size:"small",color:"primary"},"View")),n.a.createElement(wt.a,{onClick:this.buyProduct,size:"small",color:"primary"},"Buy"))))}}]),e}(n.a.Component),At=Object(h.withStyles)(function(){return{card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"142%"},cardContent:{flexGrow:1}}})(Ft),It=function(t){return{type:"ADD_TO_CART",payload:t}},Dt=Object(d.b)(null,function(t){return{addToCart:function(e){return t(It(e))}}})(At),Mt=function(t){function e(){var t,a;Object(i.a)(this,e);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(n)))).componentDidMount=function(){0===a.props.products.length&&a.loadProducts()},a.loadProducts=function(){var t=a.props,e=t.page,r=t.limit;a.props.loadProducts(e,r)},a}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.classes,a=t.products,r=t.totalProducts;return n.a.createElement("div",{className:P()(e.layout,e.cardGrid)},n.a.createElement(ft.a,{container:!0,spacing:40},a.map(function(t){return n.a.createElement(Dt,{key:t.id,product:t})})),n.a.createElement(wt.a,{onClick:this.loadProducts,variant:"contained",color:"primary",className:e.margin,disabled:a.length===r},"Add Products"))}}]),e}(n.a.Component),Ut=Object(h.withStyles)(function(t){return{layout:Object(vt.a)({width:"auto",marginLeft:3*t.spacing.unit,marginRight:3*t.spacing.unit},t.breakpoints.up(1100+3*t.spacing.unit*2),{width:1100,marginLeft:"auto",marginRight:"auto"}),cardGrid:{padding:"".concat(8*t.spacing.unit,"px 0")},margin:{display:"block",margin:"10px auto"}}})(Mt),Ht=function(t){return{type:"FETCH_RPODUCT_BY_ID",payload:t}},Lt=function(t){return function(e){return fetch("http://localhost:3005/api/product/".concat(t)).then(function(t){if(!t.ok)throw Error(t.statusText);return t}).then(function(t){return t.json()}).then(function(t){e(Ht(t))}).catch(function(t){e(_(t.message))})}},zt=Object(d.b)(function(t){return{products:t.products.productsList,page:t.products.page,limit:t.products.limit,totalProducts:t.products.totalProducts}},function(t){return{loadProducts:function(e,a){return t(function(t,e){return function(a){return fetch("http://localhost:3005/api/products?_page=".concat(t,"&&_limit=").concat(e)).then(function(t){if(!t.ok)throw Error(t.statusText);return t}).then(function(t){return a({type:"SET_TOTAL_PRODUCTS",payload:t.headers.get("x-total-count")}),t.json()}).then(function(e){a({type:"FETCH_RPODUCTS_SUCCESSFUL",payload:e}),a(function(t){return{type:"SET_PAGE",payload:t}}(t+1))}).catch(function(t){a(_(t.message))})}}(e,a))}}})(Ut),Bt=a(36),Gt=a.n(Bt),Vt=function(t){function e(){var t,a;Object(i.a)(this,e);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(n)))).componentDidMount=function(){a.props.showProduct(a.props.match.params.itemId)},a.buyProduct=function(){a.props.addToCart(a.props.product)},a}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.classes,a=t.product;return a.id?n.a.createElement("div",{className:e.root},n.a.createElement(ht.a,{className:e.paper},n.a.createElement(ft.a,{container:!0,spacing:16},n.a.createElement(Gt.a,{className:e.image},n.a.createElement("img",{className:e.img,alt:"complex",src:a.img})),n.a.createElement(ft.a,{item:!0,xs:12,sm:!0,container:!0},n.a.createElement(ft.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:16},n.a.createElement(ft.a,{item:!0,xs:!0},n.a.createElement(Pt.a,{gutterBottom:!0,variant:"h4"},a.author),n.a.createElement(Pt.a,{gutterBottom:!0,variant:"subtitle1"},a.title),n.a.createElement(Pt.a,{gutterBottom:!0},a.desc),n.a.createElement(Pt.a,{color:"textSecondary"},"ID: ",a.id)),n.a.createElement(kt.a,null,n.a.createElement(st.a,{to:"/products"},n.a.createElement(wt.a,{size:"small",color:"primary"},"Return")),n.a.createElement(wt.a,{id:"add-product",onClick:this.buyProduct,size:"small",color:"primary"},"Add to Cart"))),n.a.createElement(ft.a,{item:!0},n.a.createElement(Pt.a,{variant:"subtitle1"},a.currency," ",a.price)))))):n.a.createElement(ft.a,{container:!0,spacing:16},n.a.createElement(st.a,{to:"/products"},n.a.createElement(wt.a,{size:"small",color:"primary"},"Return")))}}]),e}(r.Component),Wt=Object(h.withStyles)(function(t){return{root:{padding:"40px 0",flexGrow:1},paper:{padding:2*t.spacing.unit,margin:"auto",maxWidth:900},image:{},img:{margin:"auto",display:"block"}}},{withTheme:!0})(Vt),Jt={showProduct:function(t){return function(e,a){var r=a().products.productsList.find(function(e){return e.id===t});e(r?Ht(r):Lt(t))}},addToCart:It},Qt=Object(d.b)(function(t){return{product:t.products.product}},Jt)(Wt),Yt=function(t){function e(){var t,a;Object(i.a)(this,e);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(n)))).addToCart=function(){a.props.addToCart(a.props.product)},a.removeFromCart=function(){a.props.removeFromCart(a.props.product)},a.removeOneProduct=function(){a.props.removeOneFromCart(a.props.product)},a}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.classes,a=t.product,r=t.count;return n.a.createElement(ft.a,{container:!0,spacing:16},n.a.createElement(ft.a,{item:!0},n.a.createElement(Gt.a,{className:e.image},n.a.createElement("img",{className:e.img,alt:"complex",src:a.img}))),n.a.createElement(ft.a,{item:!0,xs:12,sm:!0,container:!0},n.a.createElement(ft.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:16},n.a.createElement(ft.a,{item:!0,xs:!0},n.a.createElement(Pt.a,{gutterBottom:!0,variant:"subtitle1"},a.author),n.a.createElement(Pt.a,{gutterBottom:!0},n.a.createElement("div",null,n.a.createElement("p",null,a.title))),n.a.createElement(Pt.a,{color:"textSecondary"},"id: ",a.id)),n.a.createElement(ft.a,{item:!0,container:!0,direction:"row"},n.a.createElement(wt.a,{onClick:this.removeOneProduct,size:"small",color:"primary"},"-"),n.a.createElement(Pt.a,{variant:"subtitle1"},r),n.a.createElement(wt.a,{onClick:this.addToCart,size:"small",color:"primary"},"+"))),n.a.createElement(ft.a,{item:!0},n.a.createElement(wt.a,{onClick:this.removeFromCart,size:"small",color:"primary"},"remove;"),n.a.createElement(Pt.a,{variant:"subtitle1"},a.price*r," ",a.currency))))}}]),e}(r.Component),$t=Object(h.withStyles)(function(){return{image:{width:100,height:142},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"}}})(Yt),qt={addToCart:It,removeFromCart:function(t){return{type:"REMOVE_FROM_CART",payload:t}},removeOneFromCart:function(t){return{type:"REMOVE_ONE_FROM_CART",payload:t}}},Kt=Object(d.b)(null,qt)($t),Xt=function(t){function e(){return Object(i.a)(this,e),Object(l.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.classes,a=t.productsInCart,r=t.totalAmount;return n.a.createElement("div",{className:e.root},0===a.length?n.a.createElement(Pt.a,{align:"center",variant:"body1"},"The Cart is empty"):n.a.createElement(ht.a,{id:"cart-list",className:e.paper},a.map(function(t){var e=t.product,a=t.count;return n.a.createElement(Kt,{key:e.id,product:e,count:a})}),n.a.createElement(Pt.a,{align:"right",variant:"body1"},"Total amount: ",r," UAH")))}}]),e}(r.Component),Zt=Object(h.withStyles)(function(t){return{root:{flexGrow:1,padding:"50px 0"},paper:{padding:2*t.spacing.unit,margin:"auto",maxWidth:800}}})(Xt),te=Object(d.b)(function(t){return{productsInCart:t.cart.productsInCart,totalAmount:ct(t)}},null)(Zt),ee=function(){return n.a.createElement("h1",null,"Not Found")},ae=function(t){function e(){return Object(i.a)(this,e),Object(l.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return n.a.createElement(yt.a,null,n.a.createElement(jt.a,{path:"/products",component:zt}),n.a.createElement(jt.a,{path:"/product/:itemId",component:Qt}),n.a.createElement(jt.a,{path:"/cart",component:te}),n.a.createElement(jt.a,{component:ee}))}}]),e}(r.Component),re=(a(230),Object(g.createStore)(R,Object(O.composeWithDevTools)(Object(g.applyMiddleware)(y.a)))),ne=function(t){function e(){return Object(i.a)(this,e),Object(l.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return n.a.createElement(p.a,null,n.a.createElement(h.MuiThemeProvider,{theme:b},n.a.createElement(d.a,{store:re},n.a.createElement(Ot,null,n.a.createElement(ae,null)))))}}]),e}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[107,2,1]]]);
//# sourceMappingURL=main.6e2377ed.chunk.js.map